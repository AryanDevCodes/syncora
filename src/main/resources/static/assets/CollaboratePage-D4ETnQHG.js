import{c as C,r as o,o as qe,j as e,p as Xe,q as Ge,s as O,v as W,w as B,x as Je,y as Qe,d as es,k as ss,B as u,V as ue,U as ts,M as xe,z as K,X as te,A as q,f as ae,g as X,I as as,C as U}from"./index-C6EvfBZN.js";import{C as fe}from"./card-BvVvot2N.js";import{B as pe}from"./badge-C8Hju--i.js";import{D as rs,a as ns,b as os,c as G,d as is,S as ge}from"./dropdown-menu-C7mzNdDR.js";import{c as ye,S as ls}from"./index-BqL0dr1B.js";import{u as cs}from"./index-CD5o2bZR.js";import{u as ds}from"./index-B0VMFM8O.js";import{D as ms,a as hs,b as us,c as xs}from"./dialog-nZlOt7oA.js";import{A as fs}from"./AgoraRTC_N-production-DoeOQcPm.js";import{P as re,E as ps,S as gs,T as ne,U as vs,R as js,D as ve}from"./undo-B0rVuzvX.js";import{C as ws}from"./circle-mAwATgwU.js";import{L as bs}from"./lock-CLB41KuA.js";import{T as ys}from"./trash-2-CayVD4YA.js";import"./check-VyTaZcL9.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=C("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=C("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=C("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=C("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=C("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=C("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=C("MousePointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=C("Presentation",[["path",{d:"M2 3h20",key:"91anmk"}],["path",{d:"M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3",key:"2k9sn8"}],["path",{d:"m7 21 5-5 5 5",key:"bip4we"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=C("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=C("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=C("VideoOff",[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=C("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=C("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);var Ne=["PageUp","PageDown"],Se=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],ke={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},H="Slider",[oe,Fs,Is]=Ge(H),[Ce]=Xe(H,[Is]),[As,J]=Ce(H),Me=o.forwardRef((t,r)=>{const{name:n,min:a=0,max:i=100,step:m=1,orientation:c="horizontal",disabled:d=!1,minStepsBetweenThumbs:h=0,defaultValue:g=[a],value:w,onValueChange:l=()=>{},onValueCommit:x=()=>{},inverted:y=!1,form:k,...v}=t,b=o.useRef(new Set),p=o.useRef(0),N=c==="horizontal"?Vs:Ts,[j=[],I]=qe({prop:w,defaultProp:g,onChange:S=>{var A;(A=[...b.current][p.current])==null||A.focus(),l(S)}}),L=o.useRef(j);function z(S){const D=Hs(j,S);V(S,D)}function Y(S){V(S,p.current)}function _(){const S=L.current[p.current];j[p.current]!==S&&x(j)}function V(S,D,{commit:A}={commit:!1}){const $=Ys(m),T=$s(Math.round((S-a)/m)*m+a,$),R=ye(T,[a,i]);I((M=[])=>{const E=Os(M,R,D);if(Ws(E,h*m)){p.current=E.indexOf(R);const Z=String(E)!==String(M);return Z&&A&&x(E),Z?E:M}else return M})}return e.jsx(As,{scope:t.__scopeSlider,name:n,disabled:d,min:a,max:i,valueIndexToChangeRef:p,thumbs:b.current,values:j,orientation:c,form:k,children:e.jsx(oe.Provider,{scope:t.__scopeSlider,children:e.jsx(oe.Slot,{scope:t.__scopeSlider,children:e.jsx(N,{"aria-disabled":d,"data-disabled":d?"":void 0,...v,ref:r,onPointerDown:O(v.onPointerDown,()=>{d||(L.current=j)}),min:a,max:i,inverted:y,onSlideStart:d?void 0:z,onSlideMove:d?void 0:Y,onSlideEnd:d?void 0:_,onHomeKeyDown:()=>!d&&V(a,0,{commit:!0}),onEndKeyDown:()=>!d&&V(i,j.length-1,{commit:!0}),onStepKeyDown:({event:S,direction:D})=>{if(!d){const T=Ne.includes(S.key)||S.shiftKey&&Se.includes(S.key)?10:1,R=p.current,M=j[R],E=m*T*D;V(M+E,R,{commit:!0})}}})})})})});Me.displayName=H;var[Re,Pe]=Ce(H,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Vs=o.forwardRef((t,r)=>{const{min:n,max:a,dir:i,inverted:m,onSlideStart:c,onSlideMove:d,onSlideEnd:h,onStepKeyDown:g,...w}=t,[l,x]=o.useState(null),y=B(r,N=>x(N)),k=o.useRef(void 0),v=cs(i),b=v==="ltr",p=b&&!m||!b&&m;function F(N){const j=k.current||l.getBoundingClientRect(),I=[0,j.width],z=ce(I,p?[n,a]:[a,n]);return k.current=j,z(N-j.left)}return e.jsx(Re,{scope:t.__scopeSlider,startEdge:p?"left":"right",endEdge:p?"right":"left",direction:p?1:-1,size:"width",children:e.jsx(De,{dir:v,"data-orientation":"horizontal",...w,ref:y,style:{...w.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:N=>{const j=F(N.clientX);c==null||c(j)},onSlideMove:N=>{const j=F(N.clientX);d==null||d(j)},onSlideEnd:()=>{k.current=void 0,h==null||h()},onStepKeyDown:N=>{const I=ke[p?"from-left":"from-right"].includes(N.key);g==null||g({event:N,direction:I?-1:1})}})})}),Ts=o.forwardRef((t,r)=>{const{min:n,max:a,inverted:i,onSlideStart:m,onSlideMove:c,onSlideEnd:d,onStepKeyDown:h,...g}=t,w=o.useRef(null),l=B(r,w),x=o.useRef(void 0),y=!i;function k(v){const b=x.current||w.current.getBoundingClientRect(),p=[0,b.height],N=ce(p,y?[a,n]:[n,a]);return x.current=b,N(v-b.top)}return e.jsx(Re,{scope:t.__scopeSlider,startEdge:y?"bottom":"top",endEdge:y?"top":"bottom",size:"height",direction:y?1:-1,children:e.jsx(De,{"data-orientation":"vertical",...g,ref:l,style:{...g.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:v=>{const b=k(v.clientY);m==null||m(b)},onSlideMove:v=>{const b=k(v.clientY);c==null||c(b)},onSlideEnd:()=>{x.current=void 0,d==null||d()},onStepKeyDown:v=>{const p=ke[y?"from-bottom":"from-top"].includes(v.key);h==null||h({event:v,direction:p?-1:1})}})})}),De=o.forwardRef((t,r)=>{const{__scopeSlider:n,onSlideStart:a,onSlideMove:i,onSlideEnd:m,onHomeKeyDown:c,onEndKeyDown:d,onStepKeyDown:h,...g}=t,w=J(H,n);return e.jsx(W.span,{...g,ref:r,onKeyDown:O(t.onKeyDown,l=>{l.key==="Home"?(c(l),l.preventDefault()):l.key==="End"?(d(l),l.preventDefault()):Ne.concat(Se).includes(l.key)&&(h(l),l.preventDefault())}),onPointerDown:O(t.onPointerDown,l=>{const x=l.target;x.setPointerCapture(l.pointerId),l.preventDefault(),w.thumbs.has(x)?x.focus():a(l)}),onPointerMove:O(t.onPointerMove,l=>{l.target.hasPointerCapture(l.pointerId)&&i(l)}),onPointerUp:O(t.onPointerUp,l=>{const x=l.target;x.hasPointerCapture(l.pointerId)&&(x.releasePointerCapture(l.pointerId),m(l))})})}),ze="SliderTrack",Ee=o.forwardRef((t,r)=>{const{__scopeSlider:n,...a}=t,i=J(ze,n);return e.jsx(W.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...a,ref:r})});Ee.displayName=ze;var ie="SliderRange",Fe=o.forwardRef((t,r)=>{const{__scopeSlider:n,...a}=t,i=J(ie,n),m=Pe(ie,n),c=o.useRef(null),d=B(r,c),h=i.values.length,g=i.values.map(x=>Ve(x,i.min,i.max)),w=h>1?Math.min(...g):0,l=100-Math.max(...g);return e.jsx(W.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...a,ref:d,style:{...t.style,[m.startEdge]:w+"%",[m.endEdge]:l+"%"}})});Fe.displayName=ie;var le="SliderThumb",Ie=o.forwardRef((t,r)=>{const n=Fs(t.__scopeSlider),[a,i]=o.useState(null),m=B(r,d=>i(d)),c=o.useMemo(()=>a?n().findIndex(d=>d.ref.current===a):-1,[n,a]);return e.jsx(_s,{...t,ref:m,index:c})}),_s=o.forwardRef((t,r)=>{const{__scopeSlider:n,index:a,name:i,...m}=t,c=J(le,n),d=Pe(le,n),[h,g]=o.useState(null),w=B(r,F=>g(F)),l=h?c.form||!!h.closest("form"):!0,x=Je(h),y=c.values[a],k=y===void 0?0:Ve(y,c.min,c.max),v=Bs(a,c.values.length),b=x==null?void 0:x[d.size],p=b?Ls(b,k,d.direction):0;return o.useEffect(()=>{if(h)return c.thumbs.add(h),()=>{c.thumbs.delete(h)}},[h,c.thumbs]),e.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[d.startEdge]:`calc(${k}% + ${p}px)`},children:[e.jsx(oe.ItemSlot,{scope:t.__scopeSlider,children:e.jsx(W.span,{role:"slider","aria-label":t["aria-label"]||v,"aria-valuemin":c.min,"aria-valuenow":y,"aria-valuemax":c.max,"aria-orientation":c.orientation,"data-orientation":c.orientation,"data-disabled":c.disabled?"":void 0,tabIndex:c.disabled?void 0:0,...m,ref:w,style:y===void 0?{display:"none"}:t.style,onFocus:O(t.onFocus,()=>{c.valueIndexToChangeRef.current=a})})}),l&&e.jsx(Ae,{name:i??(c.name?c.name+(c.values.length>1?"[]":""):void 0),form:c.form,value:y},a)]})});Ie.displayName=le;var Us="RadioBubbleInput",Ae=o.forwardRef(({__scopeSlider:t,value:r,...n},a)=>{const i=o.useRef(null),m=B(i,a),c=ds(r);return o.useEffect(()=>{const d=i.current;if(!d)return;const h=window.HTMLInputElement.prototype,w=Object.getOwnPropertyDescriptor(h,"value").set;if(c!==r&&w){const l=new Event("input",{bubbles:!0});w.call(d,r),d.dispatchEvent(l)}},[c,r]),e.jsx(W.input,{style:{display:"none"},...n,ref:m,defaultValue:r})});Ae.displayName=Us;function Os(t=[],r,n){const a=[...t];return a[n]=r,a.sort((i,m)=>i-m)}function Ve(t,r,n){const m=100/(n-r)*(t-r);return ye(m,[0,100])}function Bs(t,r){return r>2?`Value ${t+1} of ${r}`:r===2?["Minimum","Maximum"][t]:void 0}function Hs(t,r){if(t.length===1)return 0;const n=t.map(i=>Math.abs(i-r)),a=Math.min(...n);return n.indexOf(a)}function Ls(t,r,n){const a=t/2,m=ce([0,50],[0,a]);return(a-m(r)*n)*n}function Ks(t){return t.slice(0,-1).map((r,n)=>t[n+1]-r)}function Ws(t,r){if(r>0){const n=Ks(t);return Math.min(...n)>=r}return!0}function ce(t,r){return n=>{if(t[0]===t[1]||r[0]===r[1])return r[0];const a=(r[1]-r[0])/(t[1]-t[0]);return r[0]+a*(n-t[0])}}function Ys(t){return(String(t).split(".")[1]||"").length}function $s(t,r){const n=Math.pow(10,r);return Math.round(t*n)/n}var Te=Me,Zs=Ee,qs=Fe,Xs=Ie;const _e=o.forwardRef(({className:t,...r},n)=>e.jsxs(Te,{ref:n,className:Qe("relative flex w-full touch-none select-none items-center",t),...r,children:[e.jsx(Zs,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:e.jsx(qs,{className:"absolute h-full bg-primary"})}),e.jsx(Xs,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));_e.displayName=Te.displayName;const mt=()=>{var me,he;const{user:t}=es(),{sendMessage:r,isConnected:n}=ss(),[a,i]=o.useState({tool:"pencil",color:"#000000",strokeWidth:2,zoom:100,isLocked:!1,selectedObjects:[]}),[m,c]=o.useState(!0),[d,h]=o.useState(!1),[g,w]=o.useState(!1),[l,x]=o.useState(!1),[y,k]=o.useState(!1),[v,b]=o.useState(!1),[p,F]=o.useState(!0),[N,j]=o.useState([]),[I,L]=o.useState([]),[z,Y]=o.useState(""),[_,V]=o.useState([]),[S,D]=o.useState(!1),A=o.useRef(null),$=o.useRef(null),T=o.useRef(null),R=o.useRef(null),M=new URLSearchParams(window.location.search).get("roomId")||"collab-room",E=[{id:"select",name:"Select",icon:Rs,type:"utility"},{id:"pencil",name:"Pencil",icon:re,type:"draw"},{id:"pen",name:"Pen",icon:re,type:"draw"},{id:"highlighter",name:"Highlighter",icon:re,type:"draw"},{id:"eraser",name:"Eraser",icon:ps,type:"utility"}],Z=[{id:"rectangle",name:"Rectangle",icon:gs,type:"shape"},{id:"circle",name:"Circle",icon:ws,type:"shape"},{id:"line",name:"Line",icon:ne,type:"shape"},{id:"arrow",name:"Arrow",icon:ne,type:"shape"}],Ue=[{id:"text",name:"Text",icon:ne,type:"text"},{id:"sticky",name:"Sticky Note",icon:je,type:"text"}],Oe=["#000000","#FF0000","#00FF00","#0000FF","#FFFF00","#FF00FF","#00FFFF","#FFA500","#800080","#008000"];o.useEffect(()=>{(async()=>{try{console.log("Initializing collaborative whiteboard for room:",M),setTimeout(()=>{V([{id:"2",name:"Alice",cursor:{x:100,y:100},color:"#FF0000",isDrawing:!1,tool:"pencil"},{id:"3",name:"Bob",cursor:{x:200,y:150},color:"#0000FF",isDrawing:!1,tool:"rectangle"}])},2e3),U({title:"Collaborative whiteboard ready",description:"You can now collaborate with other users in real-time"})}catch(f){console.error("Failed to initialize whiteboard:",f),U({title:"Whiteboard initialization failed",description:"Could not initialize the collaborative whiteboard",variant:"destructive"})}})()},[M]),o.useEffect(()=>!l||!t?void 0:((async()=>{try{const f=fs.createClient({mode:"rtc",codec:"vp8"});T.current=f,f.on("user-published",async(P,ee)=>{await f.subscribe(P,ee),j(se=>[...se.filter(Ze=>Ze.uid!==P.uid),P])}),f.on("user-left",P=>{j(ee=>ee.filter(se=>se.uid!==P.uid))}),console.log("Video call initialized for collaboration room")}catch(f){console.error("Failed to initialize video call:",f)}})(),()=>{T.current&&T.current.leave()}),[l,t,M]);const Q=s=>{i(f=>({...f,tool:s}))},Be=s=>{i(f=>({...f,color:s}))},He=()=>{i(s=>({...s,zoom:Math.min(s.zoom+25,500)}))},Le=()=>{i(s=>({...s,zoom:Math.max(s.zoom-25,25)}))},Ke=()=>{i(s=>({...s,zoom:100}))},de=async()=>{var f;if(!z.trim())return;const s={id:Date.now().toString(),from:((f=t==null?void 0:t.email)==null?void 0:f.split("@")[0])||"You",content:z,timestamp:new Date,type:"text"};if(L(P=>[...P,s]),n)try{await r(M,z,"groupChat")}catch(P){console.warn("Failed to send chat message:",P)}Y("")},We=s=>{const f=s.target.files;if(f&&f.length>0){const P=f[0];U({title:"File uploaded",description:`${P.name} has been uploaded to the whiteboard`})}},Ye=async()=>{try{D(!0),U({title:"Screen sharing started",description:"You are now sharing your screen with participants"})}catch(s){console.error("Failed to start screen sharing:",s),U({title:"Screen sharing failed",description:"Could not start screen sharing",variant:"destructive"})}},$e=()=>{D(!1),U({title:"Screen sharing stopped",description:"You have stopped sharing your screen"})};return e.jsxs("div",{className:"h-[calc(100vh-4rem)] flex flex-col bg-gradient-to-br from-background via-background to-muted/10 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 gradient-mesh opacity-20 pointer-events-none"}),e.jsxs("div",{className:"relative z-10 flex-1 flex flex-col",children:[e.jsxs("div",{className:"p-4 glass-card border-b border-border/50 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(pe,{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white border-0 shadow-glow",children:[e.jsx("div",{className:"w-2 h-2 bg-white rounded-full mr-2 animate-pulse"}),"Collaborative Session"]}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold",children:"Interactive Workspace"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Room: ",M]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(u,{variant:"outline",size:"sm",onClick:()=>x(!l),className:`glass-card hover-scale ${l?"ring-2 ring-primary":""}`,children:[e.jsx(ue,{className:"w-4 h-4 mr-2"}),"Video Call"]}),e.jsxs(u,{variant:"outline",size:"sm",onClick:()=>h(!d),className:"glass-card hover-scale",children:[e.jsx(ts,{className:"w-4 h-4 mr-2"}),_.length+1]}),e.jsxs(u,{variant:"outline",size:"sm",onClick:()=>w(!g),className:`glass-card hover-scale ${g?"ring-2 ring-primary":""}`,children:[e.jsx(xe,{className:"w-4 h-4 mr-2"}),"Chat"]}),S?e.jsxs(u,{variant:"destructive",size:"sm",onClick:$e,className:"shadow-glow",children:[e.jsx(we,{className:"w-4 h-4 mr-2"}),"Stop Sharing"]}):e.jsxs(u,{variant:"outline",size:"sm",onClick:Ye,className:"glass-card hover-scale",children:[e.jsx(we,{className:"w-4 h-4 mr-2"}),"Share Screen"]})]})]}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[m&&e.jsxs("div",{className:"w-16 border-r border-border bg-card/30 flex flex-col gap-2 p-2",children:[e.jsx("div",{className:"space-y-1",children:E.map(s=>e.jsx(u,{variant:a.tool===s.id?"default":"ghost",size:"icon",onClick:()=>Q(s.id),className:"w-12 h-12 glass-card hover-scale",title:s.name,children:e.jsx(s.icon,{className:"w-5 h-5"})},s.id))}),e.jsx(K,{}),e.jsx("div",{className:"space-y-1",children:Z.map(s=>e.jsx(u,{variant:a.tool===s.id?"default":"ghost",size:"icon",onClick:()=>Q(s.id),className:"w-12 h-12 glass-card hover-scale",title:s.name,children:e.jsx(s.icon,{className:"w-5 h-5"})},s.id))}),e.jsx(K,{}),e.jsx("div",{className:"space-y-1",children:Ue.map(s=>e.jsx(u,{variant:a.tool===s.id?"default":"ghost",size:"icon",onClick:()=>Q(s.id),className:"w-12 h-12 glass-card hover-scale",title:s.name,children:e.jsx(s.icon,{className:"w-5 h-5"})},s.id))}),e.jsx(K,{}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(u,{variant:"ghost",size:"icon",onClick:()=>k(!0),className:"w-12 h-12 glass-card hover-scale",title:"Upload Files",children:e.jsx(be,{className:"w-5 h-5"})}),e.jsx(u,{variant:"ghost",size:"icon",className:"w-12 h-12 glass-card hover-scale",title:"Undo",children:e.jsx(vs,{className:"w-5 h-5"})}),e.jsx(u,{variant:"ghost",size:"icon",className:"w-12 h-12 glass-card hover-scale",title:"Redo",children:e.jsx(js,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"h-14 border-b border-border bg-card/30 flex items-center justify-between px-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Color:"}),e.jsx("div",{className:"flex gap-1",children:Oe.map(s=>e.jsx("button",{onClick:()=>Be(s),className:`w-6 h-6 rounded border-2 hover:scale-110 transition-transform ${a.color===s?"border-primary":"border-border"}`,style:{backgroundColor:s}},s))})]}),e.jsx(K,{orientation:"vertical",className:"h-6"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Size:"}),e.jsx(_e,{value:[a.strokeWidth],onValueChange:s=>i(f=>({...f,strokeWidth:s[0]})),max:20,min:1,step:1,className:"w-20"}),e.jsxs("span",{className:"text-xs text-muted-foreground w-6",children:[a.strokeWidth,"px"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{variant:"ghost",size:"sm",onClick:Le,children:e.jsx(Es,{className:"w-4 h-4"})}),e.jsxs(u,{variant:"ghost",size:"sm",onClick:Ke,children:[a.zoom,"%"]}),e.jsx(u,{variant:"ghost",size:"sm",onClick:He,children:e.jsx(zs,{className:"w-4 h-4"})}),e.jsx(K,{orientation:"vertical",className:"h-6"}),e.jsx(u,{variant:a.isLocked?"destructive":"ghost",size:"sm",onClick:()=>i(s=>({...s,isLocked:!s.isLocked})),children:a.isLocked?e.jsx(bs,{className:"w-4 h-4"}):e.jsx(ks,{className:"w-4 h-4"})}),e.jsxs(rs,{children:[e.jsx(ns,{asChild:!0,children:e.jsx(u,{variant:"ghost",size:"sm",children:e.jsx(Ns,{className:"w-4 h-4"})})}),e.jsxs(os,{children:[e.jsxs(G,{children:[e.jsx(ls,{className:"w-4 h-4 mr-2"}),"Save Whiteboard"]}),e.jsxs(G,{children:[e.jsx(ve,{className:"w-4 h-4 mr-2"}),"Export as Image"]}),e.jsxs(G,{children:[e.jsx(ve,{className:"w-4 h-4 mr-2"}),"Export as PDF"]}),e.jsx(is,{}),e.jsxs(G,{children:[e.jsx(ys,{className:"w-4 h-4 mr-2"}),"Clear All"]})]})]})]})]}),e.jsxs("div",{ref:A,className:"flex-1 relative bg-white overflow-hidden cursor-crosshair",style:{transform:`scale(${a.zoom/100})`,transformOrigin:"top left"},children:[e.jsx("canvas",{ref:$,className:"absolute inset-0 w-full h-full",width:1920,height:1080}),_.map(s=>e.jsxs("div",{className:"absolute pointer-events-none z-10",style:{left:s.cursor.x,top:s.cursor.y,transform:"translate(-50%, -50%)"},children:[e.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-white shadow-lg",style:{backgroundColor:s.color}}),e.jsx("div",{className:"text-xs text-white px-2 py-1 rounded mt-1 shadow-lg",style:{backgroundColor:s.color},children:s.name})]},s.id)),e.jsx("div",{className:"absolute inset-0 opacity-10",children:e.jsxs("svg",{width:"100%",height:"100%",children:[e.jsx("defs",{children:e.jsx("pattern",{id:"grid",width:"20",height:"20",patternUnits:"userSpaceOnUse",children:e.jsx("path",{d:"M 20 0 L 0 0 0 20",fill:"none",stroke:"#000",strokeWidth:"1"})})}),e.jsx("rect",{width:"100%",height:"100%",fill:"url(#grid)"})]})})]})]}),l&&e.jsxs("div",{className:"w-80 border-l border-border bg-card/30 flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-border flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold",children:"Video Call"}),e.jsx(u,{variant:"ghost",size:"icon",onClick:()=>x(!1),children:e.jsx(te,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex-1 p-4 space-y-4",children:[e.jsx(fe,{className:"aspect-video bg-gradient-to-br from-primary/20 to-accent/20 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsxs(q,{className:"w-16 h-16 mx-auto mb-2",children:[e.jsx(ae,{src:t==null?void 0:t.avatar,alt:"You"}),e.jsx(X,{children:(me=t==null?void 0:t.email)==null?void 0:me.charAt(0)})]}),e.jsx("p",{className:"text-sm font-medium",children:"You"})]})}),N.map((s,f)=>e.jsx(fe,{className:"aspect-video bg-gradient-to-br from-muted/20 to-accent/10 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(q,{className:"w-12 h-12 mx-auto mb-2",children:e.jsxs(X,{children:["U",f+1]})}),e.jsxs("p",{className:"text-xs",children:["User ",f+1]})]})},s.uid))]}),e.jsxs("div",{className:"p-4 border-t border-border flex justify-center gap-2",children:[e.jsx(u,{variant:v?"destructive":"secondary",size:"icon",onClick:()=>b(!v),children:v?e.jsx(Cs,{className:"w-4 h-4"}):e.jsx(Ms,{className:"w-4 h-4"})}),e.jsx(u,{variant:p?"destructive":"secondary",size:"icon",onClick:()=>F(!p),children:p?e.jsx(Ds,{className:"w-4 h-4"}):e.jsx(ue,{className:"w-4 h-4"})})]})]}),d&&e.jsxs("div",{className:"w-80 border-l border-border bg-card/30 flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-border flex items-center justify-between",children:[e.jsxs("h3",{className:"font-semibold",children:["Participants (",_.length+1,")"]}),e.jsx(u,{variant:"ghost",size:"icon",onClick:()=>h(!1),children:e.jsx(te,{className:"w-4 h-4"})})]}),e.jsx(ge,{className:"flex-1 p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg glass-card",children:[e.jsxs(q,{className:"w-10 h-10",children:[e.jsx(ae,{src:t==null?void 0:t.avatar,alt:"You"}),e.jsx(X,{children:(he=t==null?void 0:t.email)==null?void 0:he.charAt(0)})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-sm",children:"You (Host)"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Drawing with ",a.tool]})]}),e.jsx(pe,{variant:"secondary",children:"Host"})]}),_.map(s=>e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg glass-card",children:[e.jsxs("div",{className:"relative",children:[e.jsxs(q,{className:"w-10 h-10",children:[e.jsx(ae,{src:s.avatar,alt:s.name}),e.jsx(X,{children:s.name.charAt(0)})]}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 rounded-full border-2 border-background",style:{backgroundColor:s.color}})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-sm",children:s.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.isDrawing?"Drawing...":`Using ${s.tool}`})]})]},s.id))]})})]}),g&&e.jsxs("div",{className:"w-80 border-l border-border bg-card/30 flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-border flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold",children:"Chat"}),n&&e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"})]}),e.jsx(u,{variant:"ghost",size:"icon",onClick:()=>w(!1),children:e.jsx(te,{className:"w-4 h-4"})})]}),e.jsx(ge,{className:"flex-1 p-4",children:e.jsxs("div",{className:"space-y-3",children:[I.map(s=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx("span",{className:"font-medium",children:s.from}),e.jsx("span",{children:s.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),e.jsx("div",{className:"bg-muted/50 rounded-lg p-3 text-sm",children:s.content})]},s.id)),I.length===0&&e.jsx("div",{className:"text-center text-muted-foreground text-sm py-8",children:"No messages yet. Start collaborating!"})]})}),e.jsx("div",{className:"p-4 border-t border-border",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(as,{placeholder:"Type a message...",value:z,onChange:s=>Y(s.target.value),onKeyPress:s=>s.key==="Enter"&&de()}),e.jsx(u,{onClick:de,disabled:!z.trim(),children:e.jsx(xe,{className:"w-4 h-4"})})]})})]})]})]}),e.jsx(ms,{open:y,onOpenChange:k,children:e.jsxs(hs,{children:[e.jsx(us,{children:e.jsx(xs,{children:"Upload Files to Whiteboard"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs(u,{variant:"outline",className:"h-24 flex flex-col gap-2",onClick:()=>{var s;return(s=R.current)==null?void 0:s.click()},children:[e.jsx(Ss,{className:"w-8 h-8"}),e.jsx("span",{children:"Images"})]}),e.jsxs(u,{variant:"outline",className:"h-24 flex flex-col gap-2",onClick:()=>{var s;return(s=R.current)==null?void 0:s.click()},children:[e.jsx(je,{className:"w-8 h-8"}),e.jsx("span",{children:"Documents"})]}),e.jsxs(u,{variant:"outline",className:"h-24 flex flex-col gap-2",onClick:()=>{var s;return(s=R.current)==null?void 0:s.click()},children:[e.jsx(Ps,{className:"w-8 h-8"}),e.jsx("span",{children:"Presentations"})]}),e.jsxs(u,{variant:"outline",className:"h-24 flex flex-col gap-2",onClick:()=>{var s;return(s=R.current)==null?void 0:s.click()},children:[e.jsx(be,{className:"w-8 h-8"}),e.jsx("span",{children:"Other Files"})]})]}),e.jsx("input",{ref:R,type:"file",className:"hidden",multiple:!0,accept:".pdf,.ppt,.pptx,.doc,.docx,.jpg,.jpeg,.png,.gif",onChange:We})]})]})})]})};export{mt as default};
